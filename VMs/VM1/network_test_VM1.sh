#!/bin/bash

if [ -z "$1" ]
then
 echo "usage : $0 <port>"
 exit 1
fi

destPort=$1

echo ""
echo "*********************************************************"
echo "******************* PARAMETRES IP : *********************"
echo "*********************************************************"
echo ""
ip addr

echo ""
echo "*********************************************************"
echo "*************** PARAMETRES DES ROUTES : *****************"
echo "*********************************************************"
echo ""
ip route

echo ""
echo "*********************************************************"
echo "************** PING VERS 172.16.2.183 : *****************"
echo "*********************************************************"
echo ""
ping -c 5 172.16.2.183

echo ""
echo "*********************************************************"
echo "************ TEST ECHO VERS 172.16.2.183 : **************"
echo "*********************************************************"
echo ""
echo "[TEST] Bonjour Echo Serveur !" > msg.txt
nc -q 1 172.16.2.183 $destPort < msg.txt

echo ""
echo "*********************************************************"
echo "************ TEST DE PERFORMANCES RÃ‰SEAUX : *************"
echo "*********************************************************"
echo ""
echo "************* I - TAMPON DE 10 octets : *****************"
iperf3 -c 172.16.2.183 -n 1 -l 10
echo ""
echo "**************** II - TAMPON DE 2Ko : *******************"
iperf3 -c 172.16.2.183 -n 1 -l 2K
echo ""
echo "*************** III - TAMPON DE 128Ko : *****************"
iperf3 -c 172.16.2.183 -n 1 -l 128K
echo ""
echo "**************** IV - TAMPON DE 1Mo : *******************"
iperf3 -c 172.16.2.183 -n 1 -l 1M
